---
title: Hantera utbetalningar med hjälp av API:et för utbetalningstjänsten
description: Lär dig hur du använder partnercentrets utbetalningstjänst-API för att få åtkomst till utbetalningsdata
ms.date: 06/23/2021
ms.service: partner-dashboard
ms.subservice: partnercenter-sdk
author: jasongroce
ms.author: sabaja
ms.openlocfilehash: 014a1e6a14b538b7557d58710b9132dd9e37de21
ms.sourcegitcommit: 7e2d2805c4cdd61785b1cdcca99cad10d5683153
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 07/10/2021
ms.locfileid: "113592483"
---
# <a name="manage-payouts-using-the-payout-service-api"></a><span data-ttu-id="9f01e-103">Hantera utbetalningar med hjälp av API:et för utbetalningstjänsten</span><span class="sxs-lookup"><span data-stu-id="9f01e-103">Manage payouts using the Payout Service API</span></span>

<span data-ttu-id="9f01e-104">Den här artikeln förklarar hur du kan komma åt utbetalningsdata via API:erna för utbetalningstjänsten i stället för partnercentergränssnittet.</span><span class="sxs-lookup"><span data-stu-id="9f01e-104">This article explains how you can access payout data through the Payout Service APIs instead of the Partner Center UI.</span></span> <span data-ttu-id="9f01e-105">Dessa API:er är ett programmatiskt sätt att tillhandahålla funktionerna i [funktionen Exportera data](https://partner.microsoft.com/dashboard/payouts/reports/incentiveexport) i Partnercenter.</span><span class="sxs-lookup"><span data-stu-id="9f01e-105">These APIs provide a programmatic way to provide the capability of the [Export data](https://partner.microsoft.com/dashboard/payouts/reports/incentiveexport) feature in Partner Center.</span></span>

## <a name="available-apis"></a><span data-ttu-id="9f01e-106">Tillgängliga API:er</span><span class="sxs-lookup"><span data-stu-id="9f01e-106">Available APIs</span></span>

<span data-ttu-id="9f01e-107">Se alla tillgängliga API:er på [Partner payouts (Partnerutbetalningar).](/rest/api/partner-center/partner-payouts)</span><span class="sxs-lookup"><span data-stu-id="9f01e-107">See all available APIs at [Partner Payouts](/rest/api/partner-center/partner-payouts).</span></span>

## <a name="prerequisites"></a><span data-ttu-id="9f01e-108">Förutsättningar</span><span class="sxs-lookup"><span data-stu-id="9f01e-108">Prerequisites</span></span>

- <span data-ttu-id="9f01e-109">[Registrera ett program med AAD/Microsoft Identity](/graph/auth-register-app-v2) i Azure Portal och lägg till lämpliga ägare och roller i programmet.</span><span class="sxs-lookup"><span data-stu-id="9f01e-109">[Register an application with AAD/Microsoft Identity](/graph/auth-register-app-v2) in the Azure portal, and add appropriate owners and roles to the application.</span></span>
- <span data-ttu-id="9f01e-110">Installera [Visual Studio](https://visualstudio.microsoft.com/downloads/).</span><span class="sxs-lookup"><span data-stu-id="9f01e-110">Install [Visual Studio](https://visualstudio.microsoft.com/downloads/).</span></span>

## <a name="register-an-application-with-the-microsoft-identity-platform"></a><span data-ttu-id="9f01e-111">Registrera en app på Microsoft Identity Platform</span><span class="sxs-lookup"><span data-stu-id="9f01e-111">Register an application with the Microsoft identity platform</span></span>

<span data-ttu-id="9f01e-112">Med [Microsofts identitetsplattform](/azure/active-directory/develop/v2-overview) kan du skapa program som dina användare och kunder kan logga in på med sina Microsoft-identiteter eller sociala konton och ge auktoriserad åtkomst till dina egna API:er eller Microsoft-API:er som Microsoft Graph.</span><span class="sxs-lookup"><span data-stu-id="9f01e-112">The [Microsoft identity platform](/azure/active-directory/develop/v2-overview) helps you build applications your users and customers can sign in to using their Microsoft identities or social accounts, and provide authorized access to your own APIs or Microsoft APIs like Microsoft Graph.</span></span>

1. <span data-ttu-id="9f01e-113">Logga in på [Azure-portalen](https://portal.azure.com/) med ett arbets- eller skolkonto eller ett personligt Microsoft-konto.</span><span class="sxs-lookup"><span data-stu-id="9f01e-113">Sign in to the [Azure portal](https://portal.azure.com/) using either a work or school account or a personal Microsoft account.</span></span>

   <span data-ttu-id="9f01e-114">Om ditt konto ger dig åtkomst till fler än en klientorganisation väljer du ditt konto i det övre högra hörnet och ställer in portalsessionen på rätt Azure AD-klientorganisation.</span><span class="sxs-lookup"><span data-stu-id="9f01e-114">If your account gives you access to more than one tenant, select your account in the upper right corner and set your portal session to the correct Azure AD tenant.</span></span>

2. <span data-ttu-id="9f01e-115">I det vänstra navigeringsfönstret väljer du Azure Active Directory och sedan **Appregistreringar** och **sedan Ny registrering.**</span><span class="sxs-lookup"><span data-stu-id="9f01e-115">In the left navigation pane, select the Azure Active Directory service, then **App registrations**, then **New registration**.</span></span> <span data-ttu-id="9f01e-116">Sidan **Registrera ett** program visas.</span><span class="sxs-lookup"><span data-stu-id="9f01e-116">The **Register an application** page appears.</span></span>

   :::image type="content" source="./images/manage-payouts/new-app-registration.png" alt-text="Skärmbild som visar skärmen Registrera en app i Azure Portal.":::

3. <span data-ttu-id="9f01e-118">Ange programmets registreringsinformation:</span><span class="sxs-lookup"><span data-stu-id="9f01e-118">Enter your application's registration information:</span></span>

   - <span data-ttu-id="9f01e-119">Namn: Ange ett beskrivande programnamn som ska visas för användare av appen.</span><span class="sxs-lookup"><span data-stu-id="9f01e-119">Name: Enter a meaningful application name that will be displayed to users of the app.</span></span>
   - <span data-ttu-id="9f01e-120">Kontotyper som stöds: Välj vilka konton som ska stödjas av ditt program.</span><span class="sxs-lookup"><span data-stu-id="9f01e-120">Supported account types: Select which accounts your application will support.</span></span>

    | <span data-ttu-id="9f01e-121">**Kontotyper som stöds**</span><span class="sxs-lookup"><span data-stu-id="9f01e-121">**Supported account types**</span></span>                             | <span data-ttu-id="9f01e-122">**Beskrivning**</span><span class="sxs-lookup"><span data-stu-id="9f01e-122">**Description**</span></span>                                                                                            |
    |---------------------------------------------------------|------------------------------------------------------------------------------------------------------------|
    | <span data-ttu-id="9f01e-123">Endast konton i den här organisationskatalogen</span><span class="sxs-lookup"><span data-stu-id="9f01e-123">Only accounts in this organizational directory</span></span>          | <span data-ttu-id="9f01e-124">Välj det här alternativet om du skapar en verksamhetsspecifik app.</span><span class="sxs-lookup"><span data-stu-id="9f01e-124">Select this option if you're building a line-of-business (LOB) application.</span></span> <span data-ttu-id="9f01e-125">Det här alternativet är inte tillgängligt om du inte registrerar programmet i en katalog.</span><span class="sxs-lookup"><span data-stu-id="9f01e-125">This option is not available if you're not registering the application in a directory.</span></span> <span data-ttu-id="9f01e-126">Det här alternativet mappar endast till Azure AD för en enskild klientorganisation.</span><span class="sxs-lookup"><span data-stu-id="9f01e-126">This option maps to Azure AD only single-tenant.</span></span>  <span data-ttu-id="9f01e-127">Det här alternativet är standard om du inte registrerar appen utanför en katalog.</span><span class="sxs-lookup"><span data-stu-id="9f01e-127">This option is the default unless you're registering the app outside of a directory.</span></span> <span data-ttu-id="9f01e-128">I fall då appen registreras utanför en katalog är standardalternativet Azure AD för flera klientorganisationer och personliga Microsoft-konton.</span><span class="sxs-lookup"><span data-stu-id="9f01e-128">In cases where the app is registered outside of a directory, the default is Azure AD multi-tenant and personal Microsoft accounts.</span></span>             |
    | <span data-ttu-id="9f01e-129">Konton i valfri organisationskatalog</span><span class="sxs-lookup"><span data-stu-id="9f01e-129">Accounts in any organizational directory</span></span>                | <span data-ttu-id="9f01e-130">Välj det här alternativet om du vill rikta dig till mot alla företags- och utbildningskunder.</span><span class="sxs-lookup"><span data-stu-id="9f01e-130">Select this option if you would like to target all business and educational customers.</span></span>  <span data-ttu-id="9f01e-131">Det här alternativet mappar endast till Azure AD för flera klientorganisationer.</span><span class="sxs-lookup"><span data-stu-id="9f01e-131">This option maps to an Azure AD only multi-tenant.</span></span> <span data-ttu-id="9f01e-132">Om du registrerade appen som endast Azure AD för en enskild klientorganisation kan du uppdatera den till att bli endast Azure AD för flera klientorganisationer och tillbaka till en enskild klientorganisation via bladet Autentisering.</span><span class="sxs-lookup"><span data-stu-id="9f01e-132">If you registered the app as Azure AD only single-tenant, you can update it to be Azure AD multi-tenant and back to single-tenant through the Authentication blade.</span></span>                                                                                                                                                  |
    | <span data-ttu-id="9f01e-133">Konton i en valfri organisationskatalog och personliga Microsoft-konton</span><span class="sxs-lookup"><span data-stu-id="9f01e-133">Accounts in any organizational directory and personal Microsoft accounts</span></span> | <span data-ttu-id="9f01e-134">Välj det här alternativet om målgruppen är bredast möjliga uppsättning av kunder.</span><span class="sxs-lookup"><span data-stu-id="9f01e-134">Select this option to target the widest set of customers.</span></span> <span data-ttu-id="9f01e-135">Det här alternativet mappar till Azure AD för flera klientorganisationer och personliga Microsoft-konton.</span><span class="sxs-lookup"><span data-stu-id="9f01e-135">This option maps to Azure AD multi-tenant and personal Microsoft accounts.</span></span>  <span data-ttu-id="9f01e-136">Om du har registrerat appen som Azure AD för flera innehavare och personliga Microsoft-konton kan du inte ändra det här valet i användargränssnittet.</span><span class="sxs-lookup"><span data-stu-id="9f01e-136">If you registered the app as Azure AD multi-tenant and personal Microsoft accounts, you cannot change this selection in the UI.</span></span> <span data-ttu-id="9f01e-137">Du måste i stället använda redigeringsprogrammet för applikationsmanifest för att ändra de kontotyper som stöds.</span><span class="sxs-lookup"><span data-stu-id="9f01e-137">Instead, you must use the application manifest editor to change the supported account types.</span></span>                                                                          |

   - <span data-ttu-id="9f01e-138">*(valfritt)* Omdirigerings-URI: Välj den typ av app som du skapar, Webb eller Offentlig klient (Mobile & Desktop) och ange sedan omdirigerings-URI (eller svars-URL) för ditt program.</span><span class="sxs-lookup"><span data-stu-id="9f01e-138">*(optional)* Redirect URI: Select the type of app you're building, Web or Public client (mobile & desktop), and then enter the redirect URI (or reply URL) for your application.</span></span> <span data-ttu-id="9f01e-139">(Omdirigerings-URL:en är den plats där autentiseringssvaret skickas när användaren autentiseras.)</span><span class="sxs-lookup"><span data-stu-id="9f01e-139">(The redirect URL is where the authentication response will be sent after the user authenticates.)</span></span> 

      <span data-ttu-id="9f01e-140">För webbappar anger du grundläggande URL för appen.</span><span class="sxs-lookup"><span data-stu-id="9f01e-140">For web applications, provide the base URL of your app.</span></span> <span data-ttu-id="9f01e-141">Till exempel kan `http://localhost:31544` vara URL för en webbapp som körs på din lokala dator.</span><span class="sxs-lookup"><span data-stu-id="9f01e-141">For example, `http://localhost:31544` might be the URL for a web app running on your local machine.</span></span> <span data-ttu-id="9f01e-142">Användare skulle då använda den här URL:en för att logga in till ett webbklientprogram.</span><span class="sxs-lookup"><span data-stu-id="9f01e-142">Users would use this URL to sign in to a web client application.</span></span>
      <span data-ttu-id="9f01e-143">För offentliga klientprogram anger du den URI som används av Azure AD för att returnera tokensvar.</span><span class="sxs-lookup"><span data-stu-id="9f01e-143">For public client applications, provide the URI used by Azure AD to return token responses.</span></span> <span data-ttu-id="9f01e-144">Ange ett värde som är specifikt för ditt program, till exempel `myapp://auth`.</span><span class="sxs-lookup"><span data-stu-id="9f01e-144">Enter a value specific to your application, such as `myapp://auth`.</span></span>

4. <span data-ttu-id="9f01e-145">Välj **Register** (Registrera).</span><span class="sxs-lookup"><span data-stu-id="9f01e-145">Select **Register**.</span></span> <span data-ttu-id="9f01e-146">Azure AD tilldelar ett unikt program-ID (klient) till ditt program och programmets översiktssida läses in.</span><span class="sxs-lookup"><span data-stu-id="9f01e-146">Azure AD assigns a unique application (client) ID to your application, and the application's overview page loads.</span></span>

   :::image type="content" source="./images/manage-payouts/register-an-application.png" alt-text="<alternativtext>":::

5. <span data-ttu-id="9f01e-148">Om du vill lägga till funktioner i ditt program kan du välja andra konfigurationsalternativ, till exempel varumärke, certifikat och hemligheter, API-behörigheter med mera.</span><span class="sxs-lookup"><span data-stu-id="9f01e-148">If you want to add capabilities to your application, you can select other configuration options including branding, certificates and secrets, API permissions, and more.</span></span>

## <a name="platform-specific-properties"></a><span data-ttu-id="9f01e-149">Plattformsspecifika egenskaper</span><span class="sxs-lookup"><span data-stu-id="9f01e-149">Platform-specific properties</span></span>

<span data-ttu-id="9f01e-150">I följande tabell visas de egenskaper som du behöver för att konfigurera och kopiera för olika typer av appar.</span><span class="sxs-lookup"><span data-stu-id="9f01e-150">The following table shows the properties that you need to configure and copy for different kinds of apps.</span></span> <span data-ttu-id="9f01e-151">**Tilldelad** innebär att du bör använda värdet som tilldelats av Azure AD.</span><span class="sxs-lookup"><span data-stu-id="9f01e-151">**Assigned** means that you should use the value assigned by Azure AD.</span></span>

| <span data-ttu-id="9f01e-152">Typ av app</span><span class="sxs-lookup"><span data-stu-id="9f01e-152">App type</span></span>              | <span data-ttu-id="9f01e-153">Plattform</span><span class="sxs-lookup"><span data-stu-id="9f01e-153">Platform</span></span> | <span data-ttu-id="9f01e-154">Program-ID (klient)</span><span class="sxs-lookup"><span data-stu-id="9f01e-154">Application (client) ID</span></span> | <span data-ttu-id="9f01e-155">Client Secret (Klienthemlighet)</span><span class="sxs-lookup"><span data-stu-id="9f01e-155">Client Secret</span></span> | <span data-ttu-id="9f01e-156">Omdirigerings-URI/URL</span><span class="sxs-lookup"><span data-stu-id="9f01e-156">Redirect URI/URL</span></span> | <span data-ttu-id="9f01e-157">Implicit Flow</span><span class="sxs-lookup"><span data-stu-id="9f01e-157">Implicit Flow</span></span>                                                         |
|-----------------------|----------|-------------------------|---------------|------------------|-----------------------------------------------------------------------|
| <span data-ttu-id="9f01e-158">Intern/mobil</span><span class="sxs-lookup"><span data-stu-id="9f01e-158">Native/Mobile</span></span>         | <span data-ttu-id="9f01e-159">Intern</span><span class="sxs-lookup"><span data-stu-id="9f01e-159">Native</span></span>   | <span data-ttu-id="9f01e-160">Tilldelad</span><span class="sxs-lookup"><span data-stu-id="9f01e-160">Assigned</span></span>                | <span data-ttu-id="9f01e-161">No</span><span class="sxs-lookup"><span data-stu-id="9f01e-161">No</span></span>            | <span data-ttu-id="9f01e-162">Tilldelad</span><span class="sxs-lookup"><span data-stu-id="9f01e-162">Assigned</span></span>         | <span data-ttu-id="9f01e-163">No</span><span class="sxs-lookup"><span data-stu-id="9f01e-163">No</span></span>                                                                    |
| <span data-ttu-id="9f01e-164">Webbapp</span><span class="sxs-lookup"><span data-stu-id="9f01e-164">Web App</span></span>               | <span data-ttu-id="9f01e-165">Webb</span><span class="sxs-lookup"><span data-stu-id="9f01e-165">Web</span></span>      | <span data-ttu-id="9f01e-166">Tilldelad</span><span class="sxs-lookup"><span data-stu-id="9f01e-166">Assigned</span></span>                | <span data-ttu-id="9f01e-167">Ja</span><span class="sxs-lookup"><span data-stu-id="9f01e-167">Yes</span></span>           | <span data-ttu-id="9f01e-168">Ja</span><span class="sxs-lookup"><span data-stu-id="9f01e-168">Yes</span></span>              | <span data-ttu-id="9f01e-169">Valfri Open ID Anslut program använder hybridflöde som standard (Ja)</span><span class="sxs-lookup"><span data-stu-id="9f01e-169">Optional Open ID Connect middleware uses hybrid flow by default (Yes)</span></span> |
| <span data-ttu-id="9f01e-170">Ensidesapp (SPA)</span><span class="sxs-lookup"><span data-stu-id="9f01e-170">Single Page App (SPA)</span></span> | <span data-ttu-id="9f01e-171">Webb</span><span class="sxs-lookup"><span data-stu-id="9f01e-171">Web</span></span>      | <span data-ttu-id="9f01e-172">Tilldelad</span><span class="sxs-lookup"><span data-stu-id="9f01e-172">Assigned</span></span>                | <span data-ttu-id="9f01e-173">Ja</span><span class="sxs-lookup"><span data-stu-id="9f01e-173">Yes</span></span>           | <span data-ttu-id="9f01e-174">Ja</span><span class="sxs-lookup"><span data-stu-id="9f01e-174">Yes</span></span>              | <span data-ttu-id="9f01e-175">Ja SPA:er använder Open ID Anslut implicit Flow</span><span class="sxs-lookup"><span data-stu-id="9f01e-175">Yes SPAs use Open ID Connect implicit Flow</span></span>                            |
| <span data-ttu-id="9f01e-176">Tjänst/Daemon</span><span class="sxs-lookup"><span data-stu-id="9f01e-176">Service/Daemon</span></span>        | <span data-ttu-id="9f01e-177">Webb</span><span class="sxs-lookup"><span data-stu-id="9f01e-177">Web</span></span>      | <span data-ttu-id="9f01e-178">Tilldelad</span><span class="sxs-lookup"><span data-stu-id="9f01e-178">Assigned</span></span>                | <span data-ttu-id="9f01e-179">Ja</span><span class="sxs-lookup"><span data-stu-id="9f01e-179">Yes</span></span>           | <span data-ttu-id="9f01e-180">Ja</span><span class="sxs-lookup"><span data-stu-id="9f01e-180">Yes</span></span>              | <span data-ttu-id="9f01e-181">Inga</span><span class="sxs-lookup"><span data-stu-id="9f01e-181">No</span></span>                                                                    |

## <a name="create-a-service-principal"></a><span data-ttu-id="9f01e-182">Skapa ett huvudnamn för tjänsten</span><span class="sxs-lookup"><span data-stu-id="9f01e-182">Create a service principal</span></span>

<span data-ttu-id="9f01e-183">Om du vill komma åt resurser i din prenumeration måste du tilldela en roll till programmet.</span><span class="sxs-lookup"><span data-stu-id="9f01e-183">To access resources in your subscription, you must assign a role to the application.</span></span> <span data-ttu-id="9f01e-184">Hjälp med att bestämma vilken roll som ger rätt behörigheter för programmet finns i [Inbyggda Roller i Azure.](/azure/role-based-access-control/built-in-roles)</span><span class="sxs-lookup"><span data-stu-id="9f01e-184">For help deciding which role offers the right permissions for the application, see [Azure built-in roles](/azure/role-based-access-control/built-in-roles).</span></span>

> [!NOTE]
> <span data-ttu-id="9f01e-185">Du kan ange omfånget på prenumerationsnivå, resursgrupp eller resursnivå.</span><span class="sxs-lookup"><span data-stu-id="9f01e-185">You can set the scope at the level of the subscription, resource group, or resource.</span></span> <span data-ttu-id="9f01e-186">Behörigheter ärvs till lägre omfångsnivåer.</span><span class="sxs-lookup"><span data-stu-id="9f01e-186">Permissions are inherited to lower levels of scope.</span></span> <span data-ttu-id="9f01e-187">Om du till exempel lägger till ett program i rollen Läsare för en resursgrupp kan den läsa resursgruppen och alla resurser som den innehåller.</span><span class="sxs-lookup"><span data-stu-id="9f01e-187">For example, adding an application to the Reader role for a resource group means it can read the resource group and any resources it contains.</span></span>

1. <span data-ttu-id="9f01e-188">I Azure Portal du den omfångsnivå som programmet ska tilldelas.</span><span class="sxs-lookup"><span data-stu-id="9f01e-188">In the Azure portal, select the level of scope to assign the application to.</span></span> <span data-ttu-id="9f01e-189">Om du till exempel vill tilldela en roll i prenumerationsomfånget söker du efter och väljer Prenumerationer **eller** **väljer** Prenumerationer på startsidan.</span><span class="sxs-lookup"><span data-stu-id="9f01e-189">For example, to assign a role at the subscription scope, search for and select **Subscriptions**, or select **Subscriptions** on the home page.</span></span>

   :::image type="content" source="./images/manage-payouts/search-for-subscriptions.png" alt-text="Skärmbild som visar skärmsökningen Prenumerationer.":::

2. <span data-ttu-id="9f01e-191">Välj den prenumeration som programmet ska tilldelas till.</span><span class="sxs-lookup"><span data-stu-id="9f01e-191">Select the subscription to assign the application to.</span></span>

   :::image type="content" source="./images/manage-payouts/internal-testing-subscription.png" alt-text="Skärmbild som visar skärmen Prenumerationer med flaggan Intern testning inställd på sant.":::

> [!NOTE]
> <span data-ttu-id="9f01e-193">Om du inte ser den prenumeration som du letar efter väljer du filtret globala prenumerationer och ser till att den prenumeration som du vill använda är markerad för portalen.</span><span class="sxs-lookup"><span data-stu-id="9f01e-193">If you don't see the subscription you're looking for, select the global subscriptions filter and ensure the subscription you want is selected for the portal.</span></span>

3. <span data-ttu-id="9f01e-194">Välj **Åtkomstkontroll (IAM)** och sedan **Lägg till rolltilldelning**.</span><span class="sxs-lookup"><span data-stu-id="9f01e-194">Select **Access control (IAM)**, and then select **Add role assignment**.</span></span>

4. <span data-ttu-id="9f01e-195">Välj den roll som du vill tilldela till programmet.</span><span class="sxs-lookup"><span data-stu-id="9f01e-195">Select the role you wish to assign to the application.</span></span> <span data-ttu-id="9f01e-196">Om du till exempel vill tillåta att programmet kör åtgärder som omstart, startar och stoppar instanser väljer du rollen Deltagare.</span><span class="sxs-lookup"><span data-stu-id="9f01e-196">For example, to allow the application to execute actions like reboot, start and stop instances, select the Contributor role.</span></span> <span data-ttu-id="9f01e-197">Läs mer om [tillgängliga roller.](/azure/role-based-access-control/built-in-roles)</span><span class="sxs-lookup"><span data-stu-id="9f01e-197">Read more about [available roles](/azure/role-based-access-control/built-in-roles).</span></span>

   <span data-ttu-id="9f01e-198">Som standard visas inte Azure AD-program i de tillgängliga alternativen.</span><span class="sxs-lookup"><span data-stu-id="9f01e-198">By default, Azure AD applications aren't displayed in the available options.</span></span> <span data-ttu-id="9f01e-199">Du hittar programmet genom att söka efter namnet och välja det i resultatet.</span><span class="sxs-lookup"><span data-stu-id="9f01e-199">To find your application, search on the name and select it from the results.</span></span> <span data-ttu-id="9f01e-200">I skärmbilden nedan är `example-app` AAD-appen som du registrerade.</span><span class="sxs-lookup"><span data-stu-id="9f01e-200">In the below screenshot, `example-app` is the AAD app you registered.</span></span>

   :::image type="content" source="./images/manage-payouts/add-role-assignment.png" alt-text="Skärmbild som visar användargränssnittet för att lägga till en rolltilldelning för ett testprogram.":::

5. <span data-ttu-id="9f01e-202">Välj **Spara**.</span><span class="sxs-lookup"><span data-stu-id="9f01e-202">Select **Save**.</span></span> <span data-ttu-id="9f01e-203">Du kan sedan se ditt program i listan över användare med en roll för det omfånget.</span><span class="sxs-lookup"><span data-stu-id="9f01e-203">You can then see your application in the list of users with a role for that scope.</span></span>

   <span data-ttu-id="9f01e-204">Du kan börja använda tjänstens huvudnamn för att köra skript eller appar.</span><span class="sxs-lookup"><span data-stu-id="9f01e-204">You can start using your service principal to run your scripts or apps.</span></span> <span data-ttu-id="9f01e-205">Om du vill hantera behörigheter för tjänstens huvudnamn kan du läsa status för användarmedgivande, granska behörigheter, se inloggningsinformation med mera), visa dina företagsprogram i [Azure Portal](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="9f01e-205">To manage your service principal's permissions, see user consent status, review permissions, see sign-in information, and more), view your Enterprise applications in the [Azure portal](https://portal.azure.com).</span></span>

## <a name="set-up-api-permissions"></a><span data-ttu-id="9f01e-206">Konfigurera API-behörigheter</span><span class="sxs-lookup"><span data-stu-id="9f01e-206">Set up API permissions</span></span>

<span data-ttu-id="9f01e-207">Det här avsnittet innehåller anvisningar om hur du ställer in de API-behörigheter som krävs.</span><span class="sxs-lookup"><span data-stu-id="9f01e-207">This section provides instruction on how to set up the required API permissions.</span></span> <span data-ttu-id="9f01e-208">Mer information om hur du ställer in API-behörigheter för Partnercenter finns [i Partner-API autentisering](/partner/develop/api-authentication).</span><span class="sxs-lookup"><span data-stu-id="9f01e-208">For more information about setting up Partner Center API permissions, see [Partner API authentication](/partner/develop/api-authentication).</span></span>

<span data-ttu-id="9f01e-209">**Bevilja behörighet till Graph API**</span><span class="sxs-lookup"><span data-stu-id="9f01e-209">**Grant permission to Graph API**</span></span>

1. <span data-ttu-id="9f01e-210">Öppna [Appregistreringar](https://go.microsoft.com/fwlink/?linkid=2083908) i Azure Portal.</span><span class="sxs-lookup"><span data-stu-id="9f01e-210">Open the [App registrations](https://go.microsoft.com/fwlink/?linkid=2083908) in the Azure portal.</span></span>

2. <span data-ttu-id="9f01e-211">Välj ett program eller [skapa en app](/azure/active-directory/develop/quickstart-register-app) om du inte redan har en.</span><span class="sxs-lookup"><span data-stu-id="9f01e-211">Select an application, or [create an app](/azure/active-directory/develop/quickstart-register-app) if you don't already have one.</span></span>

3. <span data-ttu-id="9f01e-212">På programmets översiktssida går du till **Hantera,** väljer **API-behörigheter och** sedan **Lägg till en behörighet.**</span><span class="sxs-lookup"><span data-stu-id="9f01e-212">On the application's Overview page, under **Manage**, select **API Permissions**, then **Add a permission**.</span></span>

4. <span data-ttu-id="9f01e-213">Välj **Microsoft Graph** listan över tillgängliga API:er.</span><span class="sxs-lookup"><span data-stu-id="9f01e-213">Select **Microsoft Graph** from the list of available APIs.</span></span>

5. <span data-ttu-id="9f01e-214">Välj **Delegerade behörigheter** och lägg till nödvändiga behörigheter.</span><span class="sxs-lookup"><span data-stu-id="9f01e-214">Select **Delegated permissions** and add required permissions.</span></span> <span data-ttu-id="9f01e-215">Mer information finns i Konfigurera [appåtkomst.](/azure/active-directory/develop/quickstart-configure-app-access-web-apis)</span><span class="sxs-lookup"><span data-stu-id="9f01e-215">For more information, see [Configure app access](/azure/active-directory/develop/quickstart-configure-app-access-web-apis).</span></span>

   :::image type="content" source="./images/manage-payouts/graph-request-api-permissions.png" alt-text="Skärmbild som visar skärmen för behörighetsbegäran i Azure Portal med Microsoft Graph valt.":::

<span data-ttu-id="9f01e-217">**Medgivande till API-åtkomst till Partner Center API via AAD-app**</span><span class="sxs-lookup"><span data-stu-id="9f01e-217">**Consent to API access to Partner Center API via AAD app**</span></span>

6. <span data-ttu-id="9f01e-218">För ditt program väljer du **API-behörigheter.** På skärmen Begär API-behörigheter väljer du Lägg till en behörighet **och** sedan **API:er som min organisation använder.**</span><span class="sxs-lookup"><span data-stu-id="9f01e-218">For your application, select **API permissions**, then, from the Request API permissions screen, select **Add a permission**, then **APIs my organization uses**.</span></span>

7. <span data-ttu-id="9f01e-219">Sök efter **MICROSOFT Partner (Microsoft Dev Center) API (4990cffe-04e8-4e8b-808a-1175604b879f)**.</span><span class="sxs-lookup"><span data-stu-id="9f01e-219">Search for **Microsoft Partner (Microsoft Dev Center) API (4990cffe-04e8-4e8b-808a-1175604b879f)**.</span></span>

   :::image type="content" source="./images/manage-payouts/partner-api-request-permissions.png" alt-text="Skärmbild som visar skärmen API-behörigheter med Microsoft-partner vald.":::

8. <span data-ttu-id="9f01e-221">Ange Delegerade behörigheter till **Partnercenter.**</span><span class="sxs-lookup"><span data-stu-id="9f01e-221">Set the Delegated Permissions to **Partner Center**.</span></span>

   :::image type="content" source="./images/manage-payouts/partner-api-request-permissions.png" alt-text="Skärmbild som visar de delegerade behörigheter som valts för Partnercenter på skärmen Begär API-behörigheter.":::

9. <span data-ttu-id="9f01e-223">Bevilja **administratörsmedgivande** för API:erna.</span><span class="sxs-lookup"><span data-stu-id="9f01e-223">Grant **Admin consent** for the APIs.</span></span>

   :::image type="content" source="./images/manage-payouts/api-permissions.png" alt-text="Skärmbild som visar växlingsknappen för administratörsmedgivande på skärmen API-behörigheter.":::

   <span data-ttu-id="9f01e-225">Kontrollera att Administratörsmedgivande är aktiverat på skärmen Status för administratörsmedgivande.</span><span class="sxs-lookup"><span data-stu-id="9f01e-225">Verify that Admin consent is enabled in the Admin consent status screen.</span></span>

   :::image type="content" source="./images/manage-payouts/admin-consent-verification.png" alt-text="Skärmbild som visar skärmen status för administratörsmedgivande":::

10. <span data-ttu-id="9f01e-227">I avsnittet **Autentisering** kontrollerar du att alternativet **Tillåt offentliga klientflöden** är inställt på **Ja.**</span><span class="sxs-lookup"><span data-stu-id="9f01e-227">In the **Authentication** section, make sure the **Allow public client flows** option is set to **Yes**.</span></span>

    :::image type="content" source="./images/manage-payouts/allow-public-client-flows.png" alt-text="Skärmbild som visar skärmen Autentisering med Tillåt offentliga klientflöden inställt på Ja.":::

## <a name="run-the-sample-code-in-visual-studio"></a><span data-ttu-id="9f01e-229">Kör exempelkoden i Visual Studio</span><span class="sxs-lookup"><span data-stu-id="9f01e-229">Run the sample code in Visual Studio</span></span>

<span data-ttu-id="9f01e-230">Exempelkod som visar hur API:et kan användas för betalning och transaktionshistorik finns i [Partner-Center-Payout-API:er](https://github.com/microsoft/Partner-Center-Payout-APIs) GitHub lagringsplatsen.</span><span class="sxs-lookup"><span data-stu-id="9f01e-230">Sample code showing how the API can be used for payment and transaction history be found in the [Partner-Center-Payout-APIs](https://github.com/microsoft/Partner-Center-Payout-APIs) GitHub repo.</span></span>

### <a name="sample-code-notes"></a><span data-ttu-id="9f01e-231">Exempel på kodanteckningar</span><span class="sxs-lookup"><span data-stu-id="9f01e-231">Sample code notes</span></span>

- <span data-ttu-id="9f01e-232">Konfiguration av klienthemligheter och certifikat som beskrivs i avsnittet Autentisering: Två alternativ i Skapa ett huvudnamn för [tjänsten i Azure Portal](/azure/active-directory/develop/howto-create-service-principal-portal) inte krävs.</span><span class="sxs-lookup"><span data-stu-id="9f01e-232">Configuration of Client secrets and Certificates as discussed in the Authentication: Two options section of [How to create a service principal in the Azure portal](/azure/active-directory/develop/howto-create-service-principal-portal) is not required.</span></span>
- <span data-ttu-id="9f01e-233">Konton med multifaktorautentisering (MFA) stöds inte för närvarande och kommer att orsaka ett fel.</span><span class="sxs-lookup"><span data-stu-id="9f01e-233">Accounts with multifactor authentication (MFA) are not currently supported and will cause an error.</span></span>
- <span data-ttu-id="9f01e-234">Utbetalnings-API stöder endast användar-/lösenordsbaserade autentiseringsuppgifter.</span><span class="sxs-lookup"><span data-stu-id="9f01e-234">Payout API only supports user/password-based credentials.</span></span>

## <a name="next-steps"></a><span data-ttu-id="9f01e-235">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="9f01e-235">Next steps</span></span>

- [<span data-ttu-id="9f01e-236">Använd portalen för att skapa ett Azure AD-program och huvudnamn för tjänsten som kan komma åt resurser</span><span class="sxs-lookup"><span data-stu-id="9f01e-236">Use the portal to create an Azure AD application and service principal that can access resources</span></span>](/azure/active-directory/develop/howto-create-service-principal-portal)
- [<span data-ttu-id="9f01e-237">Registrera en app på Microsoft Identity Platform</span><span class="sxs-lookup"><span data-stu-id="9f01e-237">Register an application with the Microsoft identity platform</span></span>](/graph/auth-register-app-v2)
- [<span data-ttu-id="9f01e-238">Konfigurera ett klientprogram för åtkomst till ett webb-API</span><span class="sxs-lookup"><span data-stu-id="9f01e-238">Configure a client application to access a web API</span></span>](/azure/active-directory/develop/quickstart-configure-app-access-web-apis)
